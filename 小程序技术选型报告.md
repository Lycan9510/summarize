# 背景

授权管理系统以及后续发展需要小程序入口的补充，根据前端团队的vue.js技术栈，在uni-app、kbone、chameleon、mpvue、wepy、Mpx几个框架中进行选型。经过分析比较，后续在uni-app和Mpx选择。

# 框架介绍

## 1. uni-app

### 介绍

    uni-app 是一个使用 Vue.js 开发所有前端应用的框架，开发者编写一套代码，可发布到iOS、Android、Web（响应式）、以及各种小程序（微信/支付宝/百度/头条/QQ/钉钉/淘宝）、快应用等多个平台。

> 官网地址：[https://uniapp.dcloud.io](https://uniapp.dcloud.io)

> GitHub：[https://github.com/dcloudio/uni-app](https://github.com/dcloudio/uni-app)

### 原理

    uni-app属于静态编译型框架，这类框架以静态编译为主要手段，将React和Vue开发的业务源码转换到小程序环境中进行适配运行。这类框架的主要优点在于web项目迁移方便，跨端能力较强。

### 优点

    1. uni-app无需追随微信升级，可不受限在条件编译里使用wx的现在或未来的所有api
    2. uni-app的性能比一般人手写的微信原生代码性能更高。就像vue操作比一般人写js操作dom性能更高一样。底层自动diff差量更新数据，比手动setData性能更高。
    3. uni-app是纯vue语法，不必另学一种dsl。开发不同项目时，思维不用切换
    4. uni-app的组件、模板非常丰富，插件市场数千款插件。如富文本解析、图表、自定义下拉刷新等组件，uni-app版插件性能均超过了wxparse、wx-echart等微信小程序组件
    HBuilderX比微信工具更强大，开发效率更高。哪怕使用vscode等工具，由于这些工具对vue的支持强于对wxml的支持，所以开发效果也会更高
    5. 微信原生开发对webpack、预编译语言、工程流程管理很多功能都不支持，大公司很少用微信原生开发，都是在用框架来提升开发效率
    6. uni-app支持双向数据绑定、vuex状态管理，比小程序原生开发方便的多

### 注意
    uni-app 在发布到H5时支持所有vue的语法；发布到App和小程序时，由于平台限制，无法实现全部vue语法，但uni-app仍是是对vue语法支持度最高的跨端框架。

    相比Web平台， Vue.js 在 uni-app 中使用差异主要集中在两个方面：
    1. 新增：uni-app除了支持Vue实例的生命周期，还支持应用启动、页面显示等生命周期
    2. 受限：相比web平台，在小程序和App端部分功能受限。

> 具体问题详见官网-[使用 Vue.js 注意事项](https://uniapp.dcloud.io/use)

## 2. Mpx

### 介绍

    Mpx是一款致力于提高小程序开发体验和开发效率的增强型小程序框架，通过Mpx，我们能够高效优雅地开发出具有极致性能的优质小程序应用，并将其输出到各大小程序平台和web平台中运行。在跨端方面，Mpx重点保障跨小程序平台的跨端能力，由于各家小程序标准具有很强的相似性，Mpx在进行跨端输出时，以静态编译为主要手段，辅以灵活便捷的条件编译，保障了跨端输出的性能和可用性。

> 官网地址：[https://mpxjs.cn/](https://mpxjs.cn/)

> GitHub：[https://github.com/didi/mpx](https://github.com/didi/mpx)

### 原理

    Mpx的核心设计理念在于增强，这意味着Mpx是对小程序原生开发标准的补强和扩充，同时也兼容了原生开发标准。Mpx的一个设计理念在于尽可能地依赖小程序原生的自有能力，如路由系统，自定义组件，事件系统和slot等能力，因此用户在使用Mpx开发小程序时，需要对原生小程序开发有一定程度的掌握。

### 优点

    1. 数据响应 (赋值响应 / watch / computed)
    2. 增强模板语法 (动态组件 / 样式绑定 / 类名绑定 / 内联事件函数 / 双向绑定 / refs)
    3. 极致性能 (运行时性能优化 / 包体积优化 / 框架运行时体积14KB)
    4. 高效强大的编译构建 (基于webpack / 兼容webpack生态 / 兼容原生小程序 / 完善支持npm场景下的分包输出 / 高效调试)
    5. 单文件组件开发
    6. 渐进接入 / 原生组件支持
    7. 状态管理 (Vuex规范 / 支持多实例Store)
    8. 跨团队开发 (packages)
    9. 逻辑复用 (mixins)
    10. 周边能力支持 (fetch / api增强 / mock / webview-bridge)
    11. 脚手架支持
    12. 多平台增强 (支持在微信、支付宝、百度、qq、头条小程序平台中进行增强开发)
    13. 跨平台编译 (支持以微信为base，将一套代码转换输出到支付宝、百度、qq、头条小程序平台和web平台中运行)
    14.TypeScript支持 (基于ThisType实现了完善的类型推导)
    15. I18n国际化

### 注意
    从2.3.0版本开始，Mpx开始支持将已有项目跨平台输出web平台中运行的能力，由于该能力目前还处于持续开发阶段，目前仅支持将一些简单的运营类的小程序输出为web项目，无法直接转换大型复杂项目。

> 具体问题详见官网-[跨平台编译](https://mpxjs.cn/guide/advance/platform.html#%E8%B7%A8%E5%B9%B3%E5%8F%B0%E7%BC%96%E8%AF%91)

# 框架对比

    uni-app和Mpx相对于kbone、chameleon、mpvue、wepy在生态环境、框架维护状态、适用范围、学习成本都处于较优的状态。
    由于两款框架的实现原理不同，uni-app依托独立的编辑器可实现vue直接开发并多端输出；Mpx基于小程序原生语法能力进行增强，这样既能避免转译web框架时带来的不确定性和不稳定性，同时也能带来非常接近于原生的性能表现。

    综上所述：由于基础原理不同且各方面情况相似，暂时决定两个框架并行实验下项目需求开发。后续授权系统相关小程序需求暂时会使用Mpx进行开发。

