# ES6-æ•°ç»„æ‹“å±•
>æœ¬æ–‡ä¸»è¦æ˜¯å­¦ä¹ [ECMAScript 6 å…¥é—¨](https://es6.ruanyifeng.com/#docs/array#Array-from)çš„ä¸ªäººæ€»ç»“ã€‚

1. æ‹“å±•è¿ç®—ç¬¦

    æ‰©å±•è¿ç®—ç¬¦ï¼ˆspreadï¼‰æ˜¯ä¸‰ä¸ªç‚¹ï¼ˆ...ï¼‰ã€‚è¯¥è¿ç®—ç¬¦ä¸»è¦ç”¨äºŽå‡½æ•°è°ƒç”¨ã€‚

    åº”ç”¨ï¼š
    1. å¤åˆ¶æ•°ç»„
        ```
        const a1 = [1, 2];
        // å†™æ³•ä¸€
        const a2 = [...a1];
        // å†™æ³•äºŒ
        const [...a2] = a1;
        ```
        > **æ³¨æ„:** ä¸Šé¢çš„ä¸¤ç§å†™æ³•ï¼Œa2éƒ½æ˜¯a1çš„å…‹éš†,å†ä¿®æ”¹a2å°±ä¸ä¼šå¯¹a1äº§ç”Ÿå½±å“ã€‚
    2. åˆå¹¶æ•°ç»„
        ```
        const arr1 = ['a', 'b'];
        const arr2 = ['c'];
        const arr3 = ['d', 'e'];

        // ES5 çš„åˆå¹¶æ•°ç»„
        arr1.concat(arr2, arr3);
        // [ 'a', 'b', 'c', 'd', 'e' ]

        // ES6 çš„åˆå¹¶æ•°ç»„
        [...arr1, ...arr2, ...arr3]
        // [ 'a', 'b', 'c', 'd', 'e' ]
        ```
        > **æ³¨æ„:** ä¸Šé¢ä»£ç ä¸­ï¼Œç”¨ä¸¤ç§ä¸åŒæ–¹æ³•åˆå¹¶è€Œæˆçš„æ–°æ•°ç»„ï¼Œä½†æ˜¯å®ƒä»¬çš„æˆå‘˜éƒ½æ˜¯å¯¹åŽŸæ•°ç»„æˆå‘˜çš„å¼•ç”¨ï¼Œè¿™å°±æ˜¯`æµ…æ‹·è´`ã€‚å¦‚æžœä¿®æ”¹äº†å¼•ç”¨æŒ‡å‘çš„å€¼ï¼Œä¼šåŒæ­¥åæ˜ åˆ°æ–°æ•°ç»„ã€‚
    3. ä¸Žè§£æž„èµ‹å€¼ç»“åˆ

        æ‰©å±•è¿ç®—ç¬¦å¯ä»¥ä¸Žè§£æž„èµ‹å€¼ç»“åˆèµ·æ¥ï¼Œç”¨äºŽç”Ÿæˆæ•°ç»„ã€‚
        ```
        const [first, ...rest] = [1, 2, 3, 4, 5];
        first // 1
        rest  // [2, 3, 4, 5]

        const [first, ...rest] = [];
        first // undefined
        rest  // []

        const [first, ...rest] = ["foo"];
        first  // "foo"
        rest   // []
        ```
         > **æ³¨æ„:** å¦‚æžœå°†æ‰©å±•è¿ç®—ç¬¦ç”¨äºŽæ•°ç»„èµ‹å€¼ï¼Œåªèƒ½æ”¾åœ¨å‚æ•°çš„æœ€åŽä¸€ä½ï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚
    4. å­—ç¬¦ä¸²

        æ‰©å±•è¿ç®—ç¬¦è¿˜å¯ä»¥å°†å­—ç¬¦ä¸²è½¬ä¸ºçœŸæ­£çš„æ•°ç»„ã€‚å…¶èƒ½å¤Ÿæ­£ç¡®è¯†åˆ«å››ä¸ªå­—èŠ‚çš„ Unicode å­—ç¬¦ã€‚
        ```
        [...'hello']
        // [ "h", "e", "l", "l", "o" ]

        'x\uD83D\uDE80y'.length // 4
        [...'x\uD83D\uDE80y'].length // 3

        let str = 'x\uD83D\uDE80y';
        str.split('').reverse().join('')
        // "yï¿½ï¿½x"
        [...str].reverse().join('')
        // "yðŸš€x"
        ```
    5. è½¬æ¢ç±»æ•°ç»„å¯¹è±¡ä¸ºæ•°ç»„

        ä»»ä½•å®šä¹‰äº†éåŽ†å™¨ï¼ˆIteratorï¼‰æŽ¥å£çš„å¯¹è±¡ï¼Œéƒ½å¯ä»¥ç”¨æ‰©å±•è¿ç®—ç¬¦è½¬ä¸ºçœŸæ­£çš„æ•°ç»„ã€‚
        ```
        let nodeList = document.querySelectorAll('div');
        let array = [...nodeList];
        ```
    6. è½¬æ¢å¯éåŽ†å¯¹è±¡ä¸ºæ•°ç»„ 
    
        åªè¦å…·æœ‰ Iterator æŽ¥å£çš„å¯¹è±¡ï¼Œéƒ½å¯ä»¥ä½¿ç”¨æ‰©å±•è¿ç®—ç¬¦ã€‚ä¾‹å¦‚ Map å’Œ Set ç»“æž„ï¼ŒGenerator å‡½æ•°ã€‚
        ```
        let map = new Map([
            [1, 'one'],
            [2, 'two'],
            [3, 'three'],
        ]);

        let arr = [...map.keys()]; // [1, 2, 3]

        const go = function*(){
            yield 1;
            yield 2;
            yield 3;
        };

        [...go()] // [1, 2, 3]
        ```

2. Array.from()

    Array.fromæ–¹æ³•ç”¨äºŽå°†ä¸¤ç±»å¯¹è±¡è½¬ä¸ºçœŸæ­£çš„æ•°ç»„ï¼šç±»ä¼¼æ•°ç»„çš„å¯¹è±¡ï¼ˆarray-like objectï¼‰å’Œå¯éåŽ†ï¼ˆiterableï¼‰çš„å¯¹è±¡ï¼ˆåŒ…æ‹¬ ES6 æ–°å¢žçš„æ•°æ®ç»“æž„ Set å’Œ Mapï¼‰ã€‚

    Array.fromè¿˜å¯ä»¥æŽ¥å—ç¬¬äºŒä¸ªå‚æ•°ï¼Œä½œç”¨ç±»ä¼¼äºŽæ•°ç»„çš„mapæ–¹æ³•ï¼Œç”¨æ¥å¯¹æ¯ä¸ªå…ƒç´ è¿›è¡Œå¤„ç†ï¼Œå°†å¤„ç†åŽçš„å€¼æ”¾å…¥è¿”å›žçš„æ•°ç»„ã€‚å¦‚æžœmapå‡½æ•°é‡Œé¢ç”¨åˆ°äº†thiså…³é”®å­—ï¼Œè¿˜å¯ä»¥ä¼ å…¥Array.fromçš„ç¬¬ä¸‰ä¸ªå‚æ•°ï¼Œç”¨æ¥ç»‘å®šthisã€‚

    åº”ç”¨ï¼š
    1. DOM æ“ä½œè¿”å›žçš„ NodeList é›†åˆã€å‡½æ•°å†…éƒ¨çš„argumentså¯¹è±¡ è½¬ä¸º çœŸæ­£çš„æ•°ç»„ã€‚
        ```
        // NodeListå¯¹è±¡
        let ps = document.querySelectorAll('p');
        Array.from(ps).filter(p => {
        return p.textContent.length > 100;
        });

        // argumentså¯¹è±¡
        function foo() {
        var args = Array.from(arguments);
        // ...
        }
        ```
    2. ç±»ä¼¼æ•°ç»„çš„å¯¹è±¡ï¼ˆå¿…é¡»æœ‰lengthå±žæ€§ï¼‰ è½¬ä¸º çœŸæ­£çš„æ•°ç»„ã€‚
        ```
        Array.from({ length: 3 });
        // [ undefined, undefined, undefined ]
        ```

3. Array.of()

    Array.ofæ–¹æ³•ç”¨äºŽå°†ä¸€ç»„å€¼ï¼Œè½¬æ¢ä¸ºæ•°ç»„ã€‚
    
    Array.ofæ€»æ˜¯è¿”å›žå‚æ•°å€¼ç»„æˆçš„æ•°ç»„ã€‚å¦‚æžœæ²¡æœ‰å‚æ•°ï¼Œå°±è¿”å›žä¸€ä¸ªç©ºæ•°ç»„ã€‚Array.ofåŸºæœ¬ä¸Šå¯ä»¥ç”¨æ¥æ›¿ä»£Array()æˆ–new Array()ï¼Œå¹¶ä¸”ä¸å­˜åœ¨ç”±äºŽå‚æ•°ä¸åŒè€Œå¯¼è‡´çš„é‡è½½ã€‚å®ƒçš„è¡Œä¸ºéžå¸¸ç»Ÿä¸€ã€‚
    ```
    Array() // []
    Array(3) // [, , ,]
    Array(3, 11, 8) // [3, 11, 8]

    Array.of() // []
    Array.of(undefined) // [undefined]
    Array.of(1) // [1]
    Array.of(1, 2) // [1, 2]
    ```

4. æ•°ç»„å®žä¾‹çš„ copyWithin()

    æ•°ç»„å®žä¾‹çš„copyWithin()æ–¹æ³•ï¼Œåœ¨å½“å‰æ•°ç»„å†…éƒ¨ï¼Œå°†æŒ‡å®šä½ç½®çš„æˆå‘˜å¤åˆ¶åˆ°å…¶ä»–ä½ç½®ï¼ˆä¼šè¦†ç›–åŽŸæœ‰æˆå‘˜ï¼‰ï¼Œç„¶åŽè¿”å›žå½“å‰æ•°ç»„ã€‚

    å®ƒæŽ¥å—ä¸‰ä¸ªå‚æ•°ã€‚

    - targetï¼ˆå¿…éœ€ï¼‰ï¼šä»Žè¯¥ä½ç½®å¼€å§‹æ›¿æ¢æ•°æ®ã€‚å¦‚æžœä¸ºè´Ÿå€¼ï¼Œè¡¨ç¤ºå€’æ•°ã€‚
    - startï¼ˆå¯é€‰ï¼‰ï¼šä»Žè¯¥ä½ç½®å¼€å§‹è¯»å–æ•°æ®ï¼Œé»˜è®¤ä¸º 0ã€‚å¦‚æžœä¸ºè´Ÿå€¼ï¼Œè¡¨ç¤ºä»Žæœ«å°¾å¼€å§‹è®¡ç®—ã€‚
    - endï¼ˆå¯é€‰ï¼‰ï¼šåˆ°è¯¥ä½ç½®å‰åœæ­¢è¯»å–æ•°æ®ï¼Œé»˜è®¤ç­‰äºŽæ•°ç»„é•¿åº¦ã€‚å¦‚æžœä¸ºè´Ÿå€¼ï¼Œè¡¨ç¤ºä»Žæœ«å°¾å¼€å§‹è®¡ç®—ã€‚
    ```
    // å°†3å·ä½å¤åˆ¶åˆ°0å·ä½
    [1, 2, 3, 4, 5].copyWithin(0, 3, 4)
    // [4, 2, 3, 4, 5]

    // -2ç›¸å½“äºŽ3å·ä½ï¼Œ-1ç›¸å½“äºŽ4å·ä½
    [1, 2, 3, 4, 5].copyWithin(0, -2, -1)
    // [4, 2, 3, 4, 5]

    // å°†3å·ä½å¤åˆ¶åˆ°0å·ä½
    [].copyWithin.call({length: 5, 3: 1}, 0, 3)
    // {0: 1, 3: 1, length: 5}

    // å°†2å·ä½åˆ°æ•°ç»„ç»“æŸï¼Œå¤åˆ¶åˆ°0å·ä½
    let i32a = new Int32Array([1, 2, 3, 4, 5]);
    i32a.copyWithin(0, 2);
    // Int32Array [3, 4, 5, 4, 5]
    ```

5. æ•°ç»„å®žä¾‹çš„ find() å’Œ findIndex()

    æ•°ç»„å®žä¾‹çš„findæ–¹æ³•ï¼Œç”¨äºŽæ‰¾å‡ºç¬¬ä¸€ä¸ªç¬¦åˆæ¡ä»¶çš„æ•°ç»„æˆå‘˜ã€‚å¦‚æžœæ²¡æœ‰ç¬¦åˆæ¡ä»¶çš„æˆå‘˜ï¼Œåˆ™è¿”å›žundefinedã€‚

    æ•°ç»„å®žä¾‹çš„findIndexæ–¹æ³•ï¼Œè¿”å›žç¬¬ä¸€ä¸ªç¬¦åˆæ¡ä»¶çš„æ•°ç»„æˆå‘˜çš„ä½ç½®ï¼Œå¦‚æžœæ‰€æœ‰æˆå‘˜éƒ½ä¸ç¬¦åˆæ¡ä»¶ï¼Œåˆ™è¿”å›ž-1ã€‚

    å›žè°ƒå‡½æ•°å¯ä»¥æŽ¥å—ä¸‰ä¸ªå‚æ•°ï¼Œä¾æ¬¡ä¸ºå½“å‰çš„å€¼ã€å½“å‰çš„ä½ç½®å’ŒåŽŸæ•°ç»„ã€‚

    è¿™ä¸¤ä¸ªæ–¹æ³•éƒ½å¯ä»¥æŽ¥å—ç¬¬äºŒä¸ªå‚æ•°ï¼Œç”¨æ¥ç»‘å®šå›žè°ƒå‡½æ•°çš„thiså¯¹è±¡ã€‚

    > **æ³¨æ„:** è¿™ä¸¤ä¸ªæ–¹æ³•éƒ½å¯ä»¥å‘çŽ°NaNï¼Œå¼¥è¡¥äº†æ•°ç»„çš„indexOfæ–¹æ³•çš„ä¸è¶³ã€‚
    ```
    [NaN].findIndex(y => Object.is(NaN, y)) //0
    ```